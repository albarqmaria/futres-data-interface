<!DOCTYPE html>
<html>
<head>
    <title>FuTRES Search</title>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.min.js"></script>
    <script src="lib/elasticsearch.angular.js"></script>
    <script src="lib/elastic.js"></script>
    <script src="lib/elasticui.js"></script>
    <!--<script src="lib/dataGrid.min.js"></script>
    <script src="table/table.module.js"></script>
    <script src="table/queryTable.controller.js"></script>-->
  
    <style>
        .sidebar {
            position: fixed;
            top: 0;
            bottom: 0;
            z-index: 1000;
            display: block;
            padding: 20px;
            overflow-x: hidden;
            overflow-y: auto;        
            background-color: #f5f5f5;
            border-right: 1px solid #eee;
        }

        .instructions {
            display: block;
            margin: 0 auto;
            width: 450px;
        }
    </style>
    <script>
        angular
            .module('tutorial', ['elasticui'])
            .constant('euiHost', 'https://www.plantphenology.org/api/v1/query/'); // ACTION: change to cluster address
    </script>
</head>
<body ng-app="tutorial" eui-index="'futres'"><!-- ACTION: change to index name -->

    <div class="container-fluid">

        <div class="row">
            <div class="col-xs-3 sidebar">
                <h1>FuTRES Search</h1>
                <h3>Search Any Names</h3>
                <eui-searchbox field="'scientificName'"></eui-searchbox> <!-- ACTION: change to field to search on -->
                
                <!--<h3>Value</h3>
                <input type="text" eui-query="ejs.MatchQuery(measurementValue, fromYear)" ng-model="fromYear" eui-enabled="querystring.length" />\
                <input class="form-control input-sm" ng-model="queryFormVm.params.fromYear" name="fromYear" id="fromYear">
                -->
                <h3>Traits</h3>
                <eui-singleselect field="'mapped_traits'" size="500"></eui-singleselect>

                <h3>Lifestage</h3>
                <eui-singleselect field="'lifeStage'" size="10"></eui-singleselect>
                <!--<ul  class="nav nav-list" eui-aggregation="ejs.TermsAggregation(agg_name).field('mapped_traits').size(20)">
                    <li ng-repeat="bucket in aggResult.buckets">
                        <label eui-filter="ejs.TermsFilter(field, bucket.key)">
                            <span ng-if="!filter.enabled"><a href="" ng-click="filter.enabled=true">{{bucket.key}} <span class="muted">({{bucket.doc_count}})</span></a></span>
                            <span ng-if="filter.enabled">{{bucket.key}} <a href="" ng-click="filter.enabled=false" class="facet-remove">x</a></span>
                        </label>
                    </li>
                </ul>-->
                <h3>Genus</h3>
                <eui-checklist field="'genus'" size="20"></eui-checklist> <!-- ACTION: change to field to use as facet -->

                <h3>Project</h3>
                <eui-checklist field="'projectID'" size="10"></eui-checklist> 
                <h3>Results Per Page</h3>
                <select ng-model="indexVM.pageSize">
                    <option ng-repeat="item in [10, 15, 20, 50, 100]">{{item}}</option>
                </select>
                
                <p></p>
                <i>This site is currently in Beta and may change at any time without warning.
                Funding support from the the National Science Foundation.  
                Infrastructure support from iDigBio and CyVerse.
                This site is made available for research purposes and the site
                developers make no warranty or guarrantee for data contents.
                Comments can be made by email to jdeck88@gmail.com</i>
            </div>
            <div class="col-xs-9 col-xs-offset-3 main">
                <h1>Results</h1>
                <table class="table">
                    <thead>
                        <tr>
                          <th scope="col">ScientificName</th>               
                          <th scope="col">Trait</th>               
                          <th scope="col">Value</th>               
                          <th scope="col">Unit</th>               
                          <th scope="col">lifeStage</th>               
                          <th scope="col">YearCollected</th>               
                          <th scope="col">ProjectID</th>               
                        </tr>
                      </thead>
                      <tbody>
                    <tr ng-repeat="doc in indexVM.results.hits.hits">
                        <td>{{doc._source.scientificName}} </td> 
                        <td>{{doc._source.measurementType}} </td> 
                        <td>{{doc._source.measurementValue}} </td> 
                        <td>{{doc._source.measurementUnit}} </td>
                        <td>{{doc._source.lifeStage}} </td>  
                        <td>{{doc._source.yearCollected}} </td> 
                        <td>{{doc._source.projectID}} </td> 
                    </tr>
                </table>
                <eui-simple-paging></eui-simple-paging>
            </div>
        </div>
    </div>
</body>
</html>
